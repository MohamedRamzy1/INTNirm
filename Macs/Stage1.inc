Stage1 MACRO

MOV COUNTDROP,0
STAGE1:
	INC COUNTDROP
	CMP MYPLAYER,1
	JZ SC1
	
	SC2:
	    MOV PRESSED,0
	    CALL SEND2
	    CMP PRESSED,-1
	    JZ GOOUT2 
	    CALL CHECKINLINEPRESSED
	    CALL S1R2
	    MOV PRESSED,0
	    CALL REC
	    CMP PRESSED,-1
	    JZ GOOUT2     
	    CALL CHECKINLINEPRESSED
	    CALL S1R1
	    JMP MUTUAL
	
	SC1:
	    MOV PRESSED,0
	    CALL SEND1
	    CMP PRESSED,-1
	    JZ GOOUT2 
	    CALL CHECKINLINEPRESSED
	    CALL S1R1
	    MOV PRESSED,0
	    CALL REC
	    CMP PRESSED,-1
	    JZ GOOUT2 
	    CALL CHECKINLINEPRESSED
	    CALL S1R2    
	MUTUAL:     
	    CALL UpdateDropStatus 
	    CALL DRAWROCKETS
	    CALL DRAWLINE
	    CALL DRAWDROPS
	    CALL DELAY
	    CMP ALREADYINLINE,1
	    JZ GOINLINE
	    CALL CLR
	
	    CALL CHECKEND
	    CALL ELIMINATEDROPS ; IF ALL THE DROPS ELIMINATED GO TO STAGE2        
	    CMP WINNER,0
	    JNZ GOOUT
	    CMP COUNTDROP,30
	    JZ INCDROPS
	JMP STAGE1
ENDM Stage1